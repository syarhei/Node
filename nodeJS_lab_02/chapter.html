<!DOCTYPE html>
<html lang="en">

<head>
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <meta charset="UTF-8">
    <title>Chapter</title>
</head>

<body>

<style type = "text/css">
    table {
        background-color: lightgreen;
        border : 2px solid black;
        font-size: 15pt;
    }
    td {
        border : 2px solid black;
    }
</style>

<input id="chap">
<button id="add" onclick="addChap()">Add</button>

<table id="tc"></table>

<script>

    function addChap() {
        $.ajax({
            type: 'post',
            url: '/add_chap',
            data:{'value':document.getElementById('chap').value},
            success: function (data) {
                refreshChap(data);
            }
        });
    }

    function deleteChap() {
        $('tr').on('click', function() {
            var number = $("td:first-child",this).text();
            $.ajax({
                type: 'get',
                url: '/delete_chap',
                data: {'number': number},
                success: function (data) {
                    refreshChap(data);
                }
            });
        });
    }

    function refreshChap(data) {
        $('#tc tr').remove();
        var tst = JSON.parse(data);
        for (var i = 0; i < tst.chapter.length; i++) {
            $('#tc').append("<tr>" +
                    "<td>" + i + "</td>" +
                    "<td>" + tst.chapter[i] + "</td>" +
                    "<td><button onclick='deleteChap()'>" + "Delete</button></td>" +
                    "</tr>");
        }
    }

    function start(){
        $.ajax({
            type: 'get',
            url: '/chap_info',
            success: function (data) {
                refreshChap(data);
            }
        });
    }

    start();

</script>

</body>
</html>